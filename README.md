開発合宿でRubyを使ってみようと思って適当に作ったプログラムです

# サイト情報抽出ツール（レバッテック版）

下記、IT案件情報サイトに記載されている  
すべての案件情報ををログに表示して  
掲載されているすべてのスキル（javaとかAWS）と  
業種（アプリケーションエンジニアとかインフラエンジニアとか）ごとの  
案件数、最高単価、最安単価、平均単価を集計して  
csvファイルに出力するバッチプログラムです

レバッテックフリーランス  
https://freelance.levtech.jp/

## 出力ログ

### 出力内容

- 案件リスト
  - 案件名
  - 詳細ページ
  - 単価
  - 職務内容
  - 最寄り駅
  - 募集職種
  - 必須スキル
  
- スキル別集計結果
  - 技術名
  - 案件数
  - 最安単価
  - 最高単価
  - 平均単価
  
- 業種別集計結果
  - 業種名
  - 案件数
  - 最安単価
  - 最高単価
  - 平均単価

### 出力例
```
-----------------------------------------------------------------------------------
案件リスト
-----------------------------------------------------------------------------------
災害用システムテスト実行
https://freelance.levtech.jp/project/detail/4795/
～350,000円
【職務内容】
災害用システムのテスト実行案件に携わって頂きます。
【最寄り駅】
原宿/明治神宮前
【募集職種】
テストエンジニア
【必須スキル】
・テスト実行経験6ヶ月以上
・コミュニケーション能力がある方
-----------------------------------------------------------------------------------
【VB】保険行政システム開発
https://freelance.levtech.jp/project/detail/4796/
～750,000円
【職務内容】
・クライアント/サーバ環境の保険行政システムの改修をして頂きます。
・VBを用いて改修して頂きます。
・DBが得意な方にはSQLチューニングや
　　　　　　　　　　・
　　　　　　　　　　・
　　　　　　　　　　・
　　　　　　　　以下、省略

-----------------------------------------------------------------------------------
スキル別
-----------------------------------------------------------------------------------
VB.NET  合計:4  最安:600000 最高:750000 平均:650000
VB  合計:1  最安:750000 最高:750000 平均:750000
JavaScript  合計:47 最安:4000 最高:1150000  平均:695191
Java  合計:102  最安:550000 最高:1150000  平均:704617
DB2 合計:2  最安:550000 最高:650000 平均:600000
　　　　　　　　　　・
　　　　　　　　　　・
　　　　　　　　　　・
　　　　　　　　以下、省略

-----------------------------------------------------------------------------------
職種別
-----------------------------------------------------------------------------------
テストエンジニア  合計:4  最安:300000 最高:500000 平均:375000
アプリケーションエンジニア 合計:85 最安:4000 最高:1150000  平均:704105
サーバーエンジニア 合計:10 最安:450000 最高:900000 平均:700000
フロントエンドエンジニア  合計:11 最安:550000 最高:800000 平均:690909
　　　　　　　　　　・
　　　　　　　　　　・
　　　　　　　　　　・
　　　　　　　　以下、省略
```


## 出力CSVファイル

下記の２ファイルが出力される
### スキル別で集計したファイル
・levtech_jab_skil_YYYY-mm-dd-HH-MM-SS.csv
### 職種別で集計したファイル
・levtech_jab_type_YYYY-mm-dd-HH-MM-SS.csv


---

## 苦労したとこ
- １つのページですべての案件を表示することができない為  
掲載しているすべての案件を取得する為に  
すべての案件のデータを取得す為のページ取得ロジックを工夫する必要があった  
- 表示単価が月単位、時給単位の場合があった為  
集計方法が複雑になった  
今回は時給単価の場合は全体の少数だった為  
ログには表示するが集計からは除外する対応とした  
- 集計方法をスキルごとの集計と業種ごとの集計の  
２パターンにすることが大変だった

## 開発合宿でなぜRubyをやろうと思ったか
今の現場ではJavaを使って開発をしていた為  
他の言語も知ることでいろんな角度から知識が深まると思ったため  
今回Rubyで何か作ってみようとなった  


## Rubyをやってみてどうだったか
構文自体はJavyより書きやすいと感じた  
どちらがいいということではなく  
やはりJavaに比べていいとこもあればあるいとこもあると感じた  
Javaの場合、強力なIDEがあるのと型があるので  
そこらへんの補助はJavaの方がいいとおもった  
たとえば今回Rubyで「型があっていませんエラー」が多発した  
やっぱ変数に型があったほうが個人的には好き

## RubyMineについて
RubyMineはRubyのIDE  
Java開発に負けず劣らずの使いやすさ  

## Rubyについての疑問
- クラスやメソッドは呼び出す前に書いとかないといけないのか  
見やすくする為にメインロジックの下に書いていたらエラーになったので  
メインロジックの上に書くようにしたけど、ソースが読みにくくなるのではないか  
- 整数クラスをインクリメントする為に++を使ったらエラーになった  
仕方なく+=を使用したがcこの書き方しかないか  

